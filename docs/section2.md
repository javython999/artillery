# 성능 테스트를 시작하기 전 알아야할 배경 지식
## 지연시간(Latency)과 처리량(Throughput)
### 지연시간
* 클라이언트가 요청을 보낸후 응답을 받기 까지 걸린 시간. 주로 ms, s 단위

### 처리량
* 단위 시간동안 몇건의 요청을 처리할 수 있는가? 주로 tps(transaction per second) 단위

### 성능을 측정할 때는 이 2가지를 모두 측정해야함  
* `초당 3000개의 요청`이 들어올때 99%의 요청이 `100ms 미만으로 처리`되어야함

### 지연시간과 처리량을 동시에 목표로 삼아야 하는 이유
* 요청을 초당 1개만 처리하면 지연시간이 아주 낮게 나올 것
* 처리량을 늘리면 지연시간도 함께 늘어날 가능성이 높음

## 운영체제와 서버 자원
### 운영체제(OS: Operating System)
* 서버의 물리적인 자원을 관리하며 프로세스라는 단위로 애플리케이션을 실행시킴

### 지연시간, 처리량과의 관계
1. 처리량 증가 
2. 서버 자원 사용량 증가 
3. 프로세스, 스레드간 자원 사용을 위한 대기 시간이 길어짐 
4. 지연시간 길어짐 
5. 처리되지 못한 요청이 쌓임 
6. 요청 중 일부 실패

### 지나치게 경쟁적인 상태를 해소하기 위한 방안
* 장애 없는 서비스를 만들기 위한 Resilience4j - CircuitBreaker

## 네트워크
### 지연시간의 대부분을 차지하는 네트워크 호출
* 네트워크 IO는 비용이 큰 작업이다.

### 네트워크는 마법이 아니다
네트워크는 물리적인 거리에 영향을 받는다.

### 네트워크 대역폭과 지연시간의 관계
대역폭 100mb/s인 네트워크 회선에 보내려는 데이터가 150mb/s일 경우
대역폭을 넘어서는 데이터는 지연시간이 길어진다.

### 대역폭은 가장 대역폭이 낮은 회선이 맞춰진다.

## 데이터베이스
### 데이터베이스도 일종의 애플리케이션이다.

## 데이터베이스의 지연시간이 길어지는 상황
1. 많은 요청이 들어올때
2. 많은 데이터중 필요한 데이터를 찾아야할 때
3. 한번에 많은 데이터를 응답으로 줘야할 때
4. 락이 너무 자주 걸리는 경우

## 스레드 풀과 커텍션 풀
### 데드락 발생
데드락이 발생하게 되면 스레드 풀과 커넥션과 같은 제한된 자원이 빠르게 소모된다.




## 성능 테스트의 방향성